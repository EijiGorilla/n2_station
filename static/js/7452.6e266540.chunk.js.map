{"version":3,"file":"static/js/7452.6e266540.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/BuildingSublayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/i3s/BuildingFilterUtil.js","../node_modules/@arcgis/core/views/layers/BuildingComponentSublayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingComponentSublayerView3D.js","../node_modules/@arcgis/core/views/layers/BuildingSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSceneLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Evented.js\";import{IdentifiableMixin as r}from\"../../../core/Identifiable.js\";import{EsriPromiseMixin as s}from\"../../../core/Promise.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=(p,l)=>{let n=class extends(s(r(t.EventedMixin(p)))){constructor(e){super(e),this.sublayer=null,this.parent=null,this.view=null}initialize(){}get suspended(){return!this.canResume()}get updating(){return!this.suspended&&this.isUpdating()}get visible(){return!!this.sublayer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get fullOpacity(){const e=e=>null!=e?e:1;return e(this.sublayer?.opacity)*e(this.parent?.fullOpacity)}canResume(){return!this.parent?.suspended&&this.view?.ready&&this.visible||!1}isUpdating(){return!1}};return e([i()],n.prototype,\"sublayer\",void 0),e([i()],n.prototype,\"parent\",void 0),e([i({readOnly:!0})],n.prototype,\"suspended\",null),e([i({type:Boolean,readOnly:!0})],n.prototype,\"updating\",null),e([i()],n.prototype,\"view\",void 0),e([i()],n.prototype,\"visible\",null),e([i()],n.prototype,\"fullOpacity\",null),n=e([o(\"esri.views.3d.layers.BuildingSublayerView3D\")],n),n};export{p as BuildingSublayerView3DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{createMaterialFromEdges as r}from\"../support/edgeUtils.js\";import{ColorMixModeEnum as o}from\"../support/symbolColorUtils.js\";var a;!function(e){e[e.Solid=0]=\"Solid\",e[e.WireFrame=1]=\"WireFrame\",e[e.XRay=2]=\"XRay\"}(a||(a={}));const l=.15,t=.5*l;function i(e){switch(e.filterMode.type){case\"solid\":return{mode:a.Solid};case\"wire-frame\":return{mode:a.WireFrame,edgeMaterial:r(e.filterMode.edges,{})};case\"x-ray\":return{mode:a.XRay}}}function c(e,r){if(null==r)return e.color[3]=0,e.edgeMaterial=null,void(e.pickable=!1);switch(r.mode){case a.Solid:return;case a.WireFrame:return e.color[3]=0,e.edgeMaterial=r.edgeMaterial,void(e.pickable=!1);case a.XRay:return e.color[0]=1,e.color[1]=1,e.color[2]=1,e.color[3]*=l,e.colorMixMode=o.Replace,e.castShadows=!1,e.pickable=!1,void(e.edgeMaterial=n(e.edgeMaterial))}}function n(e){return null==e?null:(d.lastMaterial!==e&&(d.cachedMaterial=s(e),d.lastMaterial=e),d.cachedMaterial)}function s(r){const o=e(r.color);return o[3]*=t,{...r,color:o}}const d={cachedMaterial:null,lastMaterial:null};export{a as FilterModeEnum,c as applyFilterMode,i as parseFilterMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";class o extends e{constructor(){super(...arguments),this.sublayer=null}get updating(){return!1}get suspended(){return!1}get availableFields(){return[]}get filter(){return null}set filter(r){throw new Error(\"Not implemented\")}queryFeatures(r,e){throw new Error(\"Not implemented\")}queryObjectIds(r,e){throw new Error(\"Not implemented\")}queryFeatureCount(r,e){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(r,e){throw new Error(\"Not implemented\")}highlight(r){throw new Error(\"Not implemented\")}}r([t()],o.prototype,\"sublayer\",void 0),r([t()],o.prototype,\"availableFields\",null),r([t()],o.prototype,\"filter\",null);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s}from\"../../../core/maybe.js\";import{throwIfAborted as l,throwIfAbortError as a}from\"../../../core/promiseUtils.js\";import{syncAndInitial as n,initial as o}from\"../../../core/reactiveUtils.js\";import{property as u}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as p}from\"../../../core/sql/WhereClause.js\";import\"../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import h from\"../../../layers/support/FeatureFilter.js\";import{fixFields as y,unpackFieldNames as c,populateMissingFields as f}from\"../../../layers/support/fieldUtils.js\";import g from\"../../../rest/support/Query.js\";import{BuildingSublayerView3DMixin as m}from\"./BuildingSublayerView3D.js\";import{I3SMeshView3D as F}from\"./I3SMeshView3D.js\";import{ForAllFeaturesMode as b}from\"./II3SMeshView3D.js\";import{applyFilterMode as _}from\"./i3s/BuildingFilterUtil.js\";import{createGetFeatureExtent as E}from\"./i3s/I3SGeometryUtil.js\";import{I3SMeshViewFilter as w}from\"./i3s/I3SMeshViewFilter.js\";import{I3SQueryEngine as x}from\"./i3s/I3SQueryEngine.js\";import{I3SQueryFeatureAdapter as S}from\"./i3s/I3SQueryFeatureAdapter.js\";import{I3SQueryFeatureStore as j}from\"./i3s/I3SQueryFeatureStore.js\";import{findFieldsCaseInsensitive as v,getIndexCrs as I}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as Q}from\"./support/DefinitionExpressionSceneLayerView.js\";import{TemporalSceneLayerView as q}from\"./support/TemporalSceneLayerView.js\";import R from\"../../layers/BuildingComponentSublayerView.js\";import{hasPopupTemplate as L,getRequiredFields as V,getFetchPopupTemplate as U}from\"../../layers/support/popupUtils.js\";import{isInEffectiveScaleRange as A}from\"../../support/layerViewUtils.js\";import{TaskPriority as C}from\"../../support/Scheduler.js\";let H=class extends(q(Q(F(m(R))))){constructor(){super(...arguments),this.type=\"building-component-sublayer-3d\",this.layerView=null,this._elevationContext=\"scene\",this._isIntegratedMesh=!1,this._supportsLabeling=!1,this.requiredFields=[],this.progressiveLoadFactor=1,this._queryEngine=null}get i3slayer(){return this.sublayer}get layerUid(){return this.sublayer.layer.uid}get sublayerUid(){return this.sublayer.uid}get layerId(){return this.sublayer.layer.id}get sublayerId(){return this.sublayer.id}get layerPopupEnabledAndHasTemplate(){return this.sublayer.popupEnabled&&L(this.sublayer,this.layerView?.view.popup?.defaultPopupTemplateEnabled)}initialize(){this._updatingHandles.add((()=>this.mergedFilter),(e=>{null!=e&&w.checkSupport(e)?null==this._i3sFilter?this._i3sFilter=new w({viewFilter:e,layerFieldsIndex:this.sublayer.fieldsIndex,loadAsyncModule:e=>this._loadAsyncModule(e),addSqlFilter:(e,r)=>this.addSqlFilter(e,r,this.logError),addTimeFilter:(e,r)=>this.addTimeFilter(e,r)}):this._i3sFilter.viewFilter=e:this._i3sFilter=s(this._i3sFilter)}),n),this._updatingHandles.add((()=>[this.sublayer.renderer,this.definitionExpressionFields,this.filterExpressionFields]),(()=>this._updateRequiredFields())),this._updatingHandles.add((()=>this.sublayer.renderer),(e=>this._rendererChange(e)),o);const e=()=>this._filterChange();this._updatingHandles.add((()=>this.parsedDefinitionExpression),e),this._updatingHandles.add((()=>this._i3sFilter?.sortedObjectIds),e),this._updatingHandles.add((()=>this._i3sFilter?.parsedWhereClause),e),this._updatingHandles.add((()=>this.getTimeFilterDependencies()),e),this._updatingHandles.add((()=>this.mergedFilter),e),this._updatingHandles.add((()=>[this._i3sFilter?.parsedGeometry,this.filter?.spatialRelationship]),(()=>this._geometryFilterChange())),this._updatingHandles.add((()=>this.parsedFilterExpressions),(()=>this._updateSymbologyOverride()),o),this.addResolvingPromise(this._updateRequiredFields())}get lodFactor(){return this.view.qualitySettings.sceneService.object.lodFactor}get parsedFilterExpressions(){return\"Overview\"!==this.sublayer.modelName&&this.layerView?this.layerView.filterExpressions.map((([e,r])=>{let t;try{t=p.create(e,{fieldsIndex:this.sublayer.fieldsIndex})}catch(a){return i.getLogger(this).error(\"Failed to parse filterExpression: \"+a),null}if(!t.isStandardized)return i.getLogger(this).error(\"filterExpression is using non standard function\"),null;const s=[],l=t.fieldNames;return v(l,this.sublayer.fields,{missingFields:s}),s.length>0?(i.getLogger(this).error(`filterExpression references unknown fields: ${s.join(\", \")}`),null):[t,r]})).filter((e=>null!=e)):[]}get filter(){return this._get(\"filter\")}set filter(e){this._set(\"filter\",w.checkSupport(e)?e:null)}isUpdating(){return super.isUpdating()||(this._i3sFilter?.updating??!1)}_updateSymbologyOverride(){const e=this.parsedFilterExpressions;e.length>0?this._setSymbologyOverride(((r,t)=>{for(const[s,l]of e)try{if(s.testFeature(r))return _(t,l)}catch(i){this.logError(i)}return _(t,null)}),this.filterExpressionFields):this._setSymbologyOverride(null,null)}get filterExpressionFields(){return y(this.sublayer.fieldsIndex,this.parsedFilterExpressions.reduce(((e,[r])=>e.concat(r.fieldNames)),new Array))}get availableFields(){const e=this.sublayer,r=e.fieldsIndex;let t=this.requiredFields;if(e.outFields||e.layer.outFields){const i=[...e.outFields||[],...e.layer.outFields||[]];t=[...c(r,i),...t]}return y(r,t)}_createLayerGraphic(e){return new r({attributes:e,layer:this.sublayer.layer,sourceLayer:this.sublayer})}canResume(){return super.canResume()&&A(this.i3slayer.effectiveScaleRange,this.view.scale)&&(!this._controller||this._controller.rootNodeVisible)}async fetchPopupFeaturesFromGraphics(e,r){const t=this._validateFetchPopupFeatures(r);if(t)throw t;if(0===e.length)return[];const s=[],n=[],o=null!=this.sublayer.associatedLayer?await this.sublayer.associatedLayer.load(r):this.sublayer,u=c(this.sublayer.fieldsIndex,await V(o,U(this.sublayer,r)));l(r);const d=new Set;for(const i of e)f(u,i,d)?n.push(i):s.push(i);return 0===n.length?s:(null!=this.sublayer.associatedLayer&&await this.sublayer.associatedLayer.load().catch((()=>i.getLogger(this).warn(\"Failed to load associated feature layer. Displaying popup attributes from cached attributes.\"))),this.whenGraphicAttributes(n,Array.from(d)).catch((e=>(a(e),n))).then((e=>s.concat(e))))}async _updateRequiredFields(){const e=y(this.sublayer.fieldsIndex,[...this.sublayer.renderer?await this.sublayer.renderer.getRequiredFields(this.sublayer.fieldsIndex):[],...this.definitionExpressionFields,...this.filterExpressionFields]);this._set(\"requiredFields\",e)}_validateFetchPopupFeatures(e){const{sublayer:r}=this,{popupEnabled:i}=r;return i?U(r,e)?void 0:new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{sublayer:r}):new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{sublayer:r})}getFilters(){const e=super.getFilters();return this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),this._i3sFilter?.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}createQuery(){const e={outFields:[\"*\"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new g(e)}queryExtent(e,r){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),r?.signal)}queryFeatureCount(e,r){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),r?.signal)}queryFeatures(e,r){return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),r?.signal).then((e=>{if(!e?.features)return e;const r=this.sublayer,t=r.layer;for(const i of e.features)i.layer=t,i.sourceLayer=r;return e}))}queryObjectIds(e,r){return this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),r?.signal)}_ensureQueryEngine(){return null==this._queryEngine&&(this._queryEngine=this._createQueryEngine()),this._queryEngine}_createQueryEngine(){const e=E(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new x({layerView:this,priority:C.FEATURE_QUERY_ENGINE,spatialIndex:new j({featureAdapter:new S({objectIdField:this.sublayer.objectIdField,attributeStorageInfo:this.sublayer.attributeStorageInfo,getFeatureExtent:e}),forAllFeatures:(e,r)=>this._forAllFeatures(((r,t,i)=>e({id:r,index:t,meta:i})),r,b.QUERYABLE),getFeatureExtent:e,sourceSpatialReference:I(this.sublayer),viewSpatialReference:this.view.spatialReference})})}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():g.from(e))}};e([u()],H.prototype,\"i3slayer\",null),e([u()],H.prototype,\"layerView\",void 0),e([u()],H.prototype,\"lodFactor\",null),e([u({readOnly:!0})],H.prototype,\"parsedFilterExpressions\",null),e([u({type:h})],H.prototype,\"filter\",null),e([u()],H.prototype,\"_i3sFilter\",void 0),e([u({type:[String],readOnly:!0})],H.prototype,\"filterExpressionFields\",null),e([u({type:[String],readOnly:!0})],H.prototype,\"requiredFields\",void 0),e([u({type:[String],readOnly:!0})],H.prototype,\"availableFields\",null),H=e([d(\"esri.views.3d.layers.BuildingComponentSublayerView3D\")],H);const O=H;export{O as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";import e from\"./LayerView.js\";class s extends e{constructor(r){super(r),this.layer=null,this.sublayerViews=null}highlight(r){throw new Error(\"Not implemented\")}}r([o()],s.prototype,\"layer\",void 0),r([o()],s.prototype,\"sublayerViews\",void 0);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{a7 as r,C as t}from\"../../../chunks/languageUtils.js\";import s from\"../../../core/Accessor.js\";import i from\"../../../core/Collection.js\";import{handlesGroup as o}from\"../../../core/handleUtils.js\";import n from\"../../../core/Logger.js\";import{getOrCreateMapValue as l}from\"../../../core/MapUtils.js\";import{abortMaybe as a}from\"../../../core/maybe.js\";import{isAbortError as u,allSettledValues as p,throwIfAborted as h,createResolver as c}from\"../../../core/promiseUtils.js\";import{watch as y,syncAndInitial as d}from\"../../../core/reactiveUtils.js\";import{property as g}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as f}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../layers/buildingSublayers/BuildingGroupSublayer.js\";import m from\"./BuildingComponentSublayerView3D.js\";import{BuildingSublayerView3DMixin as w}from\"./BuildingSublayerView3D.js\";import{LayerView3D as b}from\"./LayerView3D.js\";import{parseFilterMode as V}from\"./i3s/BuildingFilterUtil.js\";import{checkSpatialReference as j}from\"./i3s/I3SUtil.js\";import{emptyHighlightHandle as C,normalizeHighlightTargetExceptQuery as _}from\"./support/highlightUtils.js\";import{LayerViewPerformanceInfo as S}from\"./support/LayerViewPerformanceInfo.js\";import{updatingProgress as v}from\"../support/updatingProperties.js\";import B from\"../../layers/BuildingSceneLayerView.js\";import{isInEffectiveScaleRange as L}from\"../../support/layerViewUtils.js\";const F=w(s);let M=class extends(b(B)){constructor(e){super(e),this.type=\"building-scene-3d\",this.sublayerViews=new i,this._abortController=new AbortController,this._loadingComponents=0,this._pendingWhenSublayerViews=new Map,this.ignoresMemoryFactor=!1}get filterExpression(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null,t=null!=r?r.filterBlocks?.find((e=>\"solid\"===e.filterMode.type)):null;return t?t.filterExpression:null}get filterExpressions(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null;return r?.filterBlocks?r.filterBlocks.toArray().map((e=>[e.filterExpression??\"\",V(e)])):[]}get updatingProgressValue(){const e=this.sublayerViews,r=this._loadingComponents+(e?e.length:0);return e.reduce(((e,r)=>e+r.updatingProgress),0)/r}get visibleAtCurrentScale(){return L(this.layer.effectiveScaleRange,this.view.scale)}isUpdating(){return this._loadingComponents>0||this.sublayerViews&&this.sublayerViews.some((e=>e.updating))}initialize(){j(this.layer.spatialReference,this.view.spatialReference,this.view.viewingMode),this._initializeSubLayerViews(this.layer.sublayers,this)}destroy(){this.sublayerViews&&(this.sublayerViews.forEach((e=>e.destroy())),this.sublayerViews=null),this._abortController=a(this._abortController)}_initializeSubLayerViews(e,r){const t=this,s=this.view;e.forEach((e=>{if(!e.isEmpty)if(\"building-group\"===e.type){const t=new F({sublayer:e,view:s,parent:r});this._initializeSubLayerViews(e.sublayers,t)}else\"mesh\"===e.geometryType&&(this._loadingComponents++,e.load({signal:this._abortController.signal}).then((()=>{const i=new m({sublayer:e,layerView:t,view:s,parent:r});this.sublayerViews.push(i);const o=this._pendingWhenSublayerViews.get(e);if(o){for(const e of o)e.resolve(i);this._pendingWhenSublayerViews.delete(e)}this.addHandles([y((()=>i.updating),(()=>this.notifyChange(\"updating\")),d),y((()=>i.updatingProgress),(()=>this.notifyChange(\"updatingProgressValue\")),d)])})).catch((r=>{u(r)||n.getLogger(this).error(`Error while creating view for sublayer ${e.id}\\nLayer: ${this.layer.url}\\n`,r)})).then((()=>{this._loadingComponents--,this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")})))}))}getGraphicFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getGraphicFromIntersectorTarget(e);return null}async fetchPopupFeaturesFromGraphics(e,r){if(0===e.length)return[];const t=P(e,(e=>e.sourceLayer)),s=[];for(const[o,n]of t){const e=this._findComponent(o);null!=e&&s.push(e.fetchPopupFeaturesFromGraphics(n,r))}const i=await p(s);return h(r),i.flat()}whenGraphicBounds(e){const r=this._findComponent(e.sourceLayer);return null==r?Promise.reject():r.whenGraphicBounds(e)}getAABBFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getAABBFromIntersectorTarget(e);return null}async whenSublayerView(e){const r=this._findComponent(e);if(null!=r)return r;const t=this._pendingWhenSublayerViews.get(e),s=c();return t?t.push(s):this._pendingWhenSublayerViews.set(e,[s]),s.promise}_findComponent(e){return this.sublayerViews.find((r=>e===r.sublayer))}highlight(e,s){if(r(e))return C;const i=_(e);if(0===i.length)return C;if(t(i[0])){const e=i,r=new Map;for(const s of e)l(r,s.sourceLayer,(()=>[])).push(s);const t=[];return this.sublayerViews.forEach((e=>{const i=r.get(e.sublayer);i&&t.push(e.highlight(i,s))})),o(t)}return C}get usedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.usedMemory),0)}get unloadedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.unloadedMemory),0)}get performanceInfo(){return new S(this.usedMemory)}};function P(e,r){const t=new Map,s=e.length;for(let i=0;i<s;i++){const s=e[i],o=r(s,i,e),n=t.get(o);n?n.push(s):t.set(o,[s])}return t}e([g()],M.prototype,\"sublayerViews\",void 0),e([g({readOnly:!0})],M.prototype,\"filterExpression\",null),e([g({readOnly:!0})],M.prototype,\"filterExpressions\",null),e([g(v)],M.prototype,\"updatingProgress\",void 0),e([g({readOnly:!0,dependsOn:[]})],M.prototype,\"updatingProgressValue\",null),e([g({readOnly:!0})],M.prototype,\"visibleAtCurrentScale\",null),M=e([f(\"esri.views.3d.layers.BuildingSceneLayerView3D\")],M);const U=M;export{U as default};\n"],"names":["p","l","n","s","r","t","EventedMixin","constructor","e","super","this","sublayer","parent","view","initialize","suspended","canResume","updating","isUpdating","visible","_this$sublayer","_overrideIfSome","fullOpacity","_this$sublayer2","_this$parent","opacity","_this$parent2","_this$view","ready","i","prototype","readOnly","type","Boolean","o","a","Solid","WireFrame","XRay","filterMode","mode","edgeMaterial","edges","c","color","pickable","colorMixMode","Replace","castShadows","d","lastMaterial","cachedMaterial","_objectSpread","arguments","availableFields","filter","Error","queryFeatures","queryObjectIds","queryFeatureCount","createQuery","queryExtent","highlight","H","q","Q","F","m","R","layerView","_elevationContext","_isIntegratedMesh","_supportsLabeling","requiredFields","progressiveLoadFactor","_queryEngine","i3slayer","layerUid","layer","uid","sublayerUid","layerId","id","sublayerId","layerPopupEnabledAndHasTemplate","_this$layerView","popupEnabled","L","popup","defaultPopupTemplateEnabled","_updatingHandles","add","mergedFilter","w","checkSupport","_i3sFilter","viewFilter","layerFieldsIndex","fieldsIndex","loadAsyncModule","_loadAsyncModule","addSqlFilter","logError","addTimeFilter","renderer","definitionExpressionFields","filterExpressionFields","_updateRequiredFields","_rendererChange","_filterChange","parsedDefinitionExpression","_this$_i3sFilter","sortedObjectIds","_this$_i3sFilter2","parsedWhereClause","getTimeFilterDependencies","_this$_i3sFilter3","_this$filter","parsedGeometry","spatialRelationship","_geometryFilterChange","parsedFilterExpressions","_updateSymbologyOverride","addResolvingPromise","lodFactor","qualitySettings","sceneService","object","modelName","filterExpressions","map","_ref","create","getLogger","error","isStandardized","fieldNames","v","fields","missingFields","length","concat","join","_get","_set","_this$_i3sFilter$upda","_this$_i3sFilter4","_setSymbologyOverride","testFeature","_","y","reduce","_ref2","Array","outFields","_createLayerGraphic","attributes","sourceLayer","A","effectiveScaleRange","scale","_controller","rootNodeVisible","fetchPopupFeaturesFromGraphics","_validateFetchPopupFeatures","associatedLayer","load","u","V","U","Set","f","push","catch","warn","whenGraphicAttributes","from","then","getRequiredFields","getFilters","_this$_i3sFilter5","addFilters","crsIndex","_collection","returnGeometry","outSpatialReference","spatialReference","g","_ensureQueryEngine","executeQueryForExtent","_ensureQuery","signal","executeQueryForCount","executeQuery","features","executeQueryForIds","_createQueryEngine","E","renderSpatialReference","x","priority","C","FEATURE_QUERY_ENGINE","spatialIndex","j","featureAdapter","S","objectIdField","attributeStorageInfo","getFeatureExtent","forAllFeatures","_forAllFeatures","index","meta","b","QUERYABLE","sourceSpatialReference","I","viewSpatialReference","_addDefinitionExpressionToQuery","h","String","O","sublayerViews","M","B","_abortController","AbortController","_loadingComponents","_pendingWhenSublayerViews","Map","ignoresMemoryFactor","filterExpression","_r$filterBlocks","activeFilterId","filters","find","filterBlocks","toArray","_e$filterExpression","updatingProgressValue","updatingProgress","visibleAtCurrentScale","some","viewingMode","_initializeSubLayerViews","sublayers","destroy","forEach","isEmpty","geometryType","get","resolve","delete","addHandles","notifyChange","url","getGraphicFromIntersectorTarget","items","set","P","_findComponent","flat","whenGraphicBounds","Promise","reject","getAABBFromIntersectorTarget","whenSublayerView","promise","usedMemory","unloadedMemory","performanceInfo","dependsOn"],"sourceRoot":""}